\documentclass{ctexbook}

\usepackage{geometry}
\geometry{a4paper}
%\usepackage[UTF8, heading = false, scheme = plain]{ctex} % 格式
\usepackage{ctex}
\usepackage[utf8]{inputenc}
\usepackage{bm}
\usepackage{graphicx} % 添加图片
% \usepackage{amsthm}
\usepackage{amsmath}
\renewcommand{\vec}[1]{\boldsymbol{#1}} % 生成粗体向量，而非带箭头的向量
\usepackage{amssymb}
\usepackage{booktabs} % excel 导出的大表格
\usepackage{rotating}
\usepackage{extarrows}
\usepackage{enumitem}
\usepackage{xcolor}
\usepackage{multicol}
\usepackage{float}

\usepackage{tikz}
\usepackage{pgfplots}
\usetikzlibrary{arrows, arrows.meta, calc, intersections, decorations.pathreplacing, patterns, decorations.markings}

\usepackage{indentfirst}
\setlength{\parindent}{2em}

\usepackage{ntheorem}
\theoremheaderfont{\bfseries\heiti}
\theorembodyfont{\fangsong}

\usepackage{makeidx} % 名词索引
\makeindex

\usepackage{xparse}
% \keyterm{关键词}[英文] - 生成索引
% \keyterm*{关键词}[英文] - 不生成索引
\NewDocumentCommand{\keyterm}{smo}{%
    {\sffamily\heiti\bfseries{#2}%
    \IfNoValueF{#3}{（{#3}）}}%
    \IfBooleanF{#1}{\index{#2}}%
}

\usepackage{zhnumber}

% chapter 标题修改为第 * 讲
\ctexset{
    chapter={format={\centering\Huge\bfseries},name={第,讲},number=\arabic{chapter}},
    section={format={\raggedright\Large\bfseries},name={,},number={\arabic{chapter}.\arabic{section}}},
    subsection={format={\raggedright\large\bfseries},name={,},number={\arabic{chapter}.\arabic{section}.\arabic{subsection}}},
}

\usepackage{mismath} % 包含 rank, span 等命令

\usepackage{pdfpages}

% hyperref 与 cleveref 需要最后引入
\usepackage{hyperref}
\usepackage{cleveref}
\hypersetup{
    colorlinks,
    pdfborder={0 0 0},
    bookmarksnumbered,
}

\newtheorem{definition}{定义}[chapter] % 中文
\newtheorem{example}{例}[chapter]
\newtheorem{lemma}{引理}[chapter]
\newtheorem{theorem}{定理}[chapter]
\newtheorem{corollary}{推论}[chapter]
\newenvironment{proof}{{\noindent\bfseries\heiti 证明}\quad\fangsong}{\hfill$\square$\par}
\newenvironment{solution}{{\noindent\bfseries\heiti 解}\quad\fangsong}{\par}

\renewcommand{\figureautorefname}{图}
\renewcommand{\tableautorefname}{表}
\renewcommand{\equationautorefname}{式}
\renewcommand{\theoremautorefname}{定理}
\renewcommand{\sectionautorefname}{节}
\newcommand{\lemmaautorefname}{引理}
\newcommand{\corollaryautorefname}{推论}
\newcommand{\exampleautorefname}{例}
\newcommand{\definitionautorefname}{定义}
\crefrangeformat{equation}{式~#3#1#4--#5#2#6}
\crefrangeformat{example}{例~#3#1#4--#5#2#6}

\DeclareMathOperator{\diag}{diag}

\title{\heiti 浙江大学 2023--2024 学年 \\ 线性代数荣誉课辅学讲义}
\author{2023--2024 学年线性代数 I/II（H）辅学授课 \\ 吴一航 \quad yhwu\_is@zju.edu.cn}

\begin{document}
\frontmatter

% 封面，代替 \maketitle
\includepdf[pages={1}]{./figs/cover.pdf}

\songti

% 插入空页
{\null
\thispagestyle{empty}
\newpage}
\setcounter{page}{1}

\pdfbookmark[0]{目录}{contents}
\tableofcontents

\addtolength{\parskip}{.5em}

\mainmatter
\setcounter{page}{1} % 将页码计数设置为 1
\input{./专题/1 预备知识.tex}
\input{./专题/2 线性空间.tex}
\input{./专题/3 有限维线性空间.tex}
\input{./专题/4 线性空间的运算.tex}
\input{./专题/5 线性映射.tex}
\input{./专题/6 线性映射基本定理.tex}
\input{./专题/7 线性映射矩阵表示（I）.tex}
\input{./专题/8 线性映射矩阵表示（II）.tex}
\input{./专题/9 线性映射矩阵表示（III）.tex}
\input{./专题/10 矩阵运算进阶（I）.tex}
\input{./专题/11 矩阵的秩.tex}
\input{./专题/12 矩阵运算进阶（II）.tex}
\input{./专题/13 行列式（I）.tex}
\input{./专题/14 行列式计算进阶.tex}
\input{./专题/15 朝花夕拾.tex}
\input{./专题/16 史海拾遗.tex}
\input{./专题/17 多项式.tex}
\input{./专题/18 不变子空间.tex}
\input{./专题/19 相似标准形（I）.tex}
\input{./专题/20 相似标准形（II）.tex}
\input{./专题/21 多项式的进一步讨论.tex}
\input{./专题/22 若当标准形.tex}
\input{./专题/23 内积空间.tex}
\input{./专题/24 内积空间上的算子（I）.tex}
\input{./专题/25 内积空间上的算子（II）.tex}
\input{./专题/26 二次型.tex}
\input{./专题/27 极分解与奇异值分解.tex}
\input{./专题/28 实空间上的算子.tex}
\input{./专题/29 行列式（II）.tex}
\input{./专题/30 线性代数与解析几何基础.tex}
\input{./专题/31 线性代数与多元微积分.tex}
\input{./专题/32 线性代数与统计学.tex}

\backmatter
\pdfbookmark[0]{索引}{index}
\printindex % TODO 需要改

\end{document}
