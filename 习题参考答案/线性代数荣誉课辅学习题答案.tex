\documentclass{ctexbook}

\usepackage{geometry}
\geometry{
    % a4paper,
    paperheight=260mm,
    paperwidth=185mm,
    top=23mm,
    bottom=23mm,
    left=20mm,
    right=20mm,
}
% \usepackage[UTF8, heading = false, scheme = plain]{ctex} % 格式
\usepackage{ctex}
\usepackage[Bjornstrup]{fncychap} % found on Internet
\usepackage[utf8]{inputenc}
\usepackage{bm}
\usepackage{graphicx} % 添加图片
\usepackage{amsmath}
\renewcommand{\vec}[1]{\boldsymbol{#1}} % 生成粗体向量，而非带箭头的向量
\usepackage{amssymb}
\usepackage{booktabs} % Excel 导出的大表格
\usepackage{rotating}
\usepackage{extarrows}
\usepackage{enumitem}
\usepackage{xcolor}
\usepackage{multicol}
\usepackage{float}
\usepackage[framemethod=TikZ]{mdframed} % 若编译缓慢，可去掉 [framemethod=TikZ]

\usepackage{tikz}
\usepackage{pgfplots}
\usetikzlibrary{cd, arrows, arrows.meta, calc, intersections, decorations.pathreplacing, patterns, decorations.markings}
\pgfplotsset{compat=1.17}

\usepackage{titlesec}
\titleformat{\section}{\centering\Large\bfseries}{\thesection}{1em}{}

\usepackage{indentfirst}
\setlength{\parindent}{2em}

\usepackage{ntheorem}
\theoremheaderfont{\bfseries\heiti}
\theorembodyfont{\fangsong}

\usepackage{makeidx} % 名词索引
\makeindex % TODO 拼音排序

\usepackage{xparse}
% \keyterm{关键词}[英文] - 生成索引
% \keyterm*{关键词}[英文] - 不生成索引
\NewDocumentCommand{\keyterm}{smo}{%
    {\sffamily\heiti\bfseries{#2}%
    \IfNoValueF{#3}{（{#3}）}}%
    \IfBooleanF{#1}{\index{#2}}%
}

\usepackage{zhnumber}

% chapter 标题修改为第 * 讲
\ctexset{
    chapter={format={\centering\Huge\bfseries},name={第,讲},number=\arabic{chapter}},
    section={format={\raggedright\Large\bfseries},name={,},number={\arabic{chapter}.\arabic{section}}},
    subsection={format={\raggedright\large\bfseries},name={,},number={\arabic{chapter}.\arabic{section}.\arabic{subsection}}},
    subsubsection={format={\raggedright\normalsize\bfseries},name={,},number={\arabic{chapter}.\arabic{section}.\arabic{subsection}.\arabic{subsubsection}}},
}

\usepackage{mismath} % 包含 rank, span 等命令

\usepackage{pdfpages}

% hyperref 与 cleveref 需要最后引入
\usepackage{hyperref}
\usepackage{cleveref}
\hypersetup{
    colorlinks,
    pdfborder={0 0 0},
    bookmarksnumbered,
    pdfauthor={吴一航},
    pdftitle={线性代数荣誉课辅学讲义},
}

\newenvironment{proof}{{\noindent\bfseries\heiti 证明}\quad\fangsong}{\hspace*{\fill}$\square$\par}
\newenvironment{solution}{{\noindent\bfseries\heiti 解}\quad\fangsong}{\par}

\mdfdefinestyle{framestyle}{
    ntheorem=true,
    roundcorner=10pt,
    frametitlerule=false,
    linewidth=0.4pt,
    innertopmargin=\topskip,
    theoremseparator={},
    theoremspace=\quad,
}

\mdtheorem[
    style=framestyle,
    linecolor=red!50!black,
    frametitlebackgroundcolor=red!5,
]{definition}{定义}[chapter]
\mdtheorem[
    style=framestyle,
    linecolor=blue!50!black,
    frametitlebackgroundcolor=blue!5,
]{example}{例}[chapter]
\mdtheorem[
    style=framestyle,
    linecolor=orange!50!black,
    frametitlebackgroundcolor=orange!5,
]{lemma}{引理}[chapter]
\mdtheorem[
    style=framestyle,
    linecolor=violet!50!black,
    frametitlebackgroundcolor=violet!5,
]{theorem}{定理}[chapter]
\mdtheorem[
    style=framestyle,
    linecolor=green!50!black,
    frametitlebackgroundcolor=green!5,
]{corollary}{推论}[chapter]
\surroundwithmdframed[
    style=framestyle,
    linecolor=teal!80!black,
]{proof}
\surroundwithmdframed[
    style=framestyle,
    linecolor=teal!80!black,
]{solution}

\renewcommand{\figureautorefname}{图}
\renewcommand{\tableautorefname}{表}
\renewcommand{\equationautorefname}{式}
\renewcommand{\theoremautorefname}{定理}
\renewcommand{\sectionautorefname}{节}
\newcommand{\lemmaautorefname}{引理}
\newcommand{\corollaryautorefname}{推论}
\newcommand{\exampleautorefname}{例}
\newcommand{\definitionautorefname}{定义}
\crefrangeformat{equation}{式~#3#1#4--#5#2#6}
\crefrangeformat{example}{例~#3#1#4--#5#2#6}

\DeclareMathOperator{\diag}{diag}

\title{\heiti 浙江大学 2023--2024 学年 \\ 线性代数荣誉课辅学讲义}
\author{2023--2024 学年线性代数 I/II（H）辅学授课 \\ 吴一航 \quad \verb|yhwu_is@zju.edu.cn|}

% 嵌套 enumerate 环境的 label
\setlist[enumerate,2]{label=(\arabic*)}
\setlist[enumerate,3]{label=\roman*.}

\begin{document}
\frontmatter

% 封面，代替 \maketitle
% \includepdf[pages={1}]{./figs/cover.pdf}

% \songti

% {% 插入空页
% 	\null
% 	\thispagestyle{empty}
% 	\clearpage
% 	\thispagestyle{empty}
% 	\input{./其它/扉页.tex}
% }
% \clearpage
% \setcounter{page}{1}
% \input{./其它/序.tex}
% \input{./其它/致读者.tex}

\clearpage
\pdfbookmark[0]{目录}{contents}
\tableofcontents

\addtolength{\parskip}{.5em}

\mainmatter
\setcounter{page}{1} % 将页码计数设置为 1
% 线代I期中/练习
\input{./历年卷/2020-2021-1extzy1.tex}
\input{./历年卷/2020-2021-1extzy2.tex}
\input{./历年卷/2020-2021-1midwzx.tex}
\input{./历年卷/2021-2022-1exlks.tex}
\input{./历年卷/2021-2022-1midwzx.tex}
\input{./历年卷/2022-2023-1midlks.tex}
\input{./历年卷/2022-2023-1midtzy.tex}
\input{./历年卷/2022-2023-1midwzx.tex}

% 线代I期末
\input{./历年卷/2009-2010-1final.tex}
\input{./历年卷/2010-2011-1final.tex}
\input{./历年卷/2011-2012-1final.tex}
\input{./历年卷/2012-2013-1final.tex}
\input{./历年卷/2013-2014-1final.tex}
\input{./历年卷/2014-2015-1final.tex}
\input{./历年卷/2018-2019-1final.tex}
\input{./历年卷/2019-2020-1final.tex}
\input{./历年卷/2021-2022-1final.tex}
\input{./历年卷/2022-2023-1final.tex}

% 线代II期中/练习
\input{./历年卷/2020-2021-2midlks.tex}
\input{./历年卷/2020-2021-2exlks.tex}
\input{./历年卷/2020-2021-2midtzy.tex}
\input{./历年卷/2022-2023-2midlks.tex}
\input{./历年卷/2022-2023-2midwzx.tex}

% 线代II期末
\input{./历年卷/2022-2023-2finalex.tex}
\input{./历年卷/2022-2023-2final.tex}

\backmatter
\pdfbookmark[0]{索引}{index}
\printindex

\end{document}
